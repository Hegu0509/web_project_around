!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configForm=t,this.element=n},(n=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(this.configForm.inputErrorClass),r.textContent=n,r.classList.add(this.configForm.errorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(this.configForm.inputErrorClass),n.classList.remove(this.configForm.errorClass),n.textContent=""}},{key:"_checkInputValidity",value:function(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this.configForm.inactiveButtonClass):t.classList.remove(this.configForm.inactiveButtonClass)}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this.configForm.inputSelector)),r=e.querySelector(this.configForm.submitButtonSelector);this._toggleButtonState(n,r),n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o),t._toggleButtonState(n,r)}))}))}},{key:"enableValidation",value:function(){var e=this;Array.from(document.querySelectorAll(this.configForm.formSelector)).forEach((function(t){t.addEventListener(e.element,(function(e){e.preventDefault()})),Array.from(t.querySelectorAll(e.configForm.fieldsetSelector)).forEach((function(t){e._setEventListeners(t)}))}))}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}(),o=document.querySelector(".profile__info-edit-button"),i=document.querySelector(".profile__info-add-button"),c=document.querySelector("#inputName"),u=document.querySelector("#inputAbout"),a=document.querySelector(".profile__info-name"),l=document.querySelector(".profile__info-occupation"),s=(document.querySelector("#inputTitle"),document.querySelector("#inputLink"),document.querySelector(".place-grid"));function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var m=function(){return e=function e(t,n,r){var o=r.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._description=t.description,this._selector=n,this._handleCardClick=o},(t=[{key:"_addEventListenersToCard",value:function(){var e=this,t=this._element.querySelector(".".concat(this._selector,"-icon-trash")),n=this._element.querySelector(".".concat(this._selector,"-icon-like"));this._element.querySelector(".".concat(this._selector,"-image")).addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),t.addEventListener("click",(function(t){t&&t.target.closest(".".concat(e._selector)).remove()})),n.addEventListener("click",(function(t){t&&t.target.classList.toggle("".concat(e._selector,"-icon-like_active"))}))}},{key:"createCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".".concat(this._selector,"-image")).src=this._link,this._element.querySelector(".".concat(this._selector,"-image")).alt=this._description,this._element.querySelector(".".concat(this._selector,"-text")).textContent=this._name,this._addEventListenersToCard(),this._element}},{key:"_getTemplate",value:function(){return document.querySelector("#templateCard").content.querySelector(".".concat(this._selector)).cloneNode(!0)}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var h=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this._renderer=o,this.container=document.querySelector(n)},(t=[{key:"renderer",value:function(){var e=this;this.items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this.container.append(e)}}])&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var w=function(){return e=function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var C=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector("#".concat(t)),this.setEventListeners(),this._handleEscClose=this._handleEscClose.bind(this)},(t=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-icon").addEventListener("click",(function(){e.close()})),this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}function q(e,t,n){return t=x(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,n||[],x(e).constructor):t.apply(e,n))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function I(e,t,n,r){var o=B(x(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(null,arguments)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var R=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=q(this,t,[e]))._submitCallback=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,(r=[{key:"_getInputValues",value:function(){var e={},t=this._popupElement.querySelector(".form");return Array.from(t.querySelectorAll("input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;I(t,"setEventListeners",this,3)([]),this._popupElement.querySelector(".form").addEventListener("submit",(function(t){t.preventDefault(),e._submitCallback(e._getInputValues()),e.close()}))}},{key:"close",value:function(){I(t,"close",this,3)([]),this._popupElement.querySelector(".form").reset()}}])&&P(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}function D(e,t,n){return t=M(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,n||[],M(e).constructor):t.apply(e,n))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(null,arguments)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}var Y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D(this,t,[e]))._popupImage=n._popupElement.querySelector(".popup__image"),n._popupTitle=n._popupElement.querySelector(".popup__image-name"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),n=t,r=[{key:"open",value:function(e,n){var r,o,i;this._popupImage.src=n,this._popupImage.alt="Imagen de ".concat(e," "),this._popupTitle.textContent=e,(r=t,o=this,i=N(M(1&3?r.prototype:r),"open",o),function(e){return i.apply(o,e)})([])}}],r&&V(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C),G=(document.querySelector("#formAdd"),new r({formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",fieldsetSelector:".form__fieldset",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},"submit"));G.enableValidation();var H=new Y("popupImage"),J=new h({items:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg",description:"Valle de Yosemite"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg",description:"Lago Louise"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg",description:"Montañas Calvas"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg",description:"Latemar"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg",description:"Parque Nacional de la Vanoise"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg",description:"Lago di Braies"}],renderer:function(e){var t=new m(e,"place-grid__element",{handleCardClick:function(){H.open(e.name,e.link)}});J.addItem(t.createCard())}},".place-grid");J.renderer();var K=new w({nameSelector:".profile__info-name",aboutSelector:".profile__info-occupation"}),Q=new R("popupEdit",(function(e){a.textContent=e.inputName,l.textContent=e.inputAbout,Q.close()}));o.addEventListener("click",(function(){Q.open();var e=K.getUserInfo();c.value=e.name,u.value=e.about,G.enableValidation()}));var X=new R("popupAdd",(function(e){var t={name:e.inputTitle,link:e.inputLink,description:e.inputTitle},n=new m(t,"place-grid__element",{handleCardClick:function(){H.open(t.name,t.link)}});s.prepend(n.createCard())}));i.addEventListener("click",(function(){X.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2RDLGNBQWUsOEJBSVhxQyxFQUFZLElBQUl4QixFQUFjLGFBQWEsU0FBQ00sR0FDaER4RCxFQUFTbkMsWUFBYzJGLEVBQVkxRCxVQUNuQ0csRUFBUXBDLFlBQWMyRixFQUFZekQsV0FDbEMyRSxFQUFVM0IsT0FDWixJQUVBbkQsRUFBV1YsaUJBQWlCLFNBQVMsV0FDbkN3RixFQUFVSixPQUNWLElBQU1LLEVBQVdGLEVBQVNHLGNBQzFCOUUsRUFBVTVDLE1BQVF5SCxFQUFTbEUsS0FDM0JWLEVBQVc3QyxNQUFReUgsRUFBU3BDLE1BQzVCMEIsRUFBY0Msa0JBQ2hCLElBR0EsSUFBTVcsRUFBVyxJQUFJM0IsRUFBYyxZQUFZLFNBQUNNLEdBQzlDLElBQU1zQixFQUFjLENBQ2xCckUsS0FBTStDLEVBQVl1QixXQUNsQnBFLEtBQU02QyxFQUFZd0IsVUFDbEJuRSxZQUFhMkMsRUFBWXVCLFlBRXJCVixFQUFVLElBQUlsRSxFQUFLMkUsRUFBYSxzQkFBdUIsQ0FDM0R2RSxnQkFBaUIsV0FDZjRELEVBQVdHLEtBQUtRLEVBQVlyRSxLQUFNcUUsRUFBWW5FLEtBQ2hELElBRUZULEVBQVUrRSxRQUFRWixFQUFRRyxhQUM1QixJQUVBM0UsRUFBVVgsaUJBQWlCLFNBQVMsV0FDbEMyRixFQUFTUCxNQUNYLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Bcm91bmQgVGhlIFUuUy4vLi9zcmMvdXRpbHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgVGhlIFUuUy4vLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIFRoZSBVLlMuLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgVGhlIFUuUy4vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL0Fyb3VuZCBUaGUgVS5TLi8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL0Fyb3VuZCBUaGUgVS5TLi8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL0Fyb3VuZCBUaGUgVS5TLi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIFRoZSBVLlMuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIFRoZSBVLlMuLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWdGb3JtLCBlbGVtZW50KSB7XG4gICAgdGhpcy5jb25maWdGb3JtID0gY29uZmlnRm9ybTtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbmZpZ0Zvcm0uaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWdGb3JtLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb25maWdGb3JtLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb25maWdGb3JtLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXG4gICAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWdGb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb25maWdGb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuY29uZmlnRm9ybS5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLmNvbmZpZ0Zvcm0uc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcblxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmNvbmZpZ0Zvcm0uZm9ybVNlbGVjdG9yKVxuICAgICk7XG5cbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmVsZW1lbnQsIChldnQpID0+IHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmNvbmZpZ0Zvcm0uZmllbGRzZXRTZWxlY3RvcilcbiAgICAgICk7XG5cbiAgICAgIGZpZWxkc2V0TGlzdC5mb3JFYWNoKChmaWVsZHNldCkgPT4ge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhmaWVsZHNldCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWFkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dE5hbWVcIik7XG5leHBvcnQgY29uc3QgaW5wdXRBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRBYm91dFwiKTtcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGFib3V0TWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tb2NjdXBhdGlvblwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dFRpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXRMaW5rXCIpO1xuZXhwb3J0IGNvbnN0IHBsYWNlR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2UtZ3JpZFwiKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkLCBzZWxlY3RvciwgeyBoYW5kbGVDYXJkQ2xpY2sgfSkge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmQubGluaztcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGNhcmQuZGVzY3JpcHRpb247XG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfYWRkRXZlbnRMaXN0ZW5lcnNUb0NhcmQoKSB7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke3RoaXMuX3NlbGVjdG9yfS1pY29uLXRyYXNoYFxuICAgICk7XG5cbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke3RoaXMuX3NlbGVjdG9yfS1pY29uLWxpa2VgXG4gICAgKTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9zZWxlY3Rvcn0taW1hZ2VgKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICAgIH0pO1xuXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0KSB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdChgLiR7dGhpcy5fc2VsZWN0b3J9YCkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0KSB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShgJHt0aGlzLl9zZWxlY3Rvcn0taWNvbi1saWtlX2FjdGl2ZWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX3NlbGVjdG9yfS1pbWFnZWApLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9zZWxlY3Rvcn0taW1hZ2VgKS5hbHQgPVxuICAgICAgdGhpcy5fZGVzY3JpcHRpb247XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9zZWxlY3Rvcn0tdGV4dGApLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX25hbWU7XG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnNUb0NhcmQoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGVtcGxhdGVDYXJkXCIpLmNvbnRlbnQ7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0ZW1wbGF0ZUNhcmRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9zZWxlY3Rvcn1gKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlcmVyKCkge1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3BvcHVwU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtaWNvblwiKTtcblxuICAgIHBvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGNhbGxCYWNrKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBjYWxsQmFjaztcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgY29uc3QgZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtbmFtZVwiKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBJbWFnZW4gZGUgJHtuYW1lfSBgO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL3V0aWxzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7XG4gIGVkaXRCdXR0b24sXG4gIGFkZEJ1dHRvbixcbiAgaW5wdXROYW1lLFxuICBpbnB1dEFib3V0LFxuICB1c2VyTmFtZSxcbiAgYWJvdXRNZSxcbiAgcGxhY2VHcmlkLFxufSBmcm9tIFwiLi91dGlscy91dGlscy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmNvbnN0IGZvcm1BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1BZGRcIik7XG5cbi8vIEFycmF5IGRlIHRhcmpldGFzIGluaWNpYWxlc1xuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCIsXG4gICAgZGVzY3JpcHRpb246IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkxhZ28gTG91aXNlXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcbiAgICBkZXNjcmlwdGlvbjogXCJMYXRlbWFyXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gIH0sXG5dO1xuXG4vLyBDb25maWd1cmFjaW9uIHBhcmEgbGEgdmFsaWRhY2lvbiBkZSBmb3JtdWxhcmlvc1xuY29uc3QgY29uZmlnRm9ybSA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgZmllbGRzZXRTZWxlY3RvcjogXCIuZm9ybV9fZmllbGRzZXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdGb3JtLCBcInN1Ym1pdFwiKTtcbmZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBQb3B1cCBJbWFnZVxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcInBvcHVwSW1hZ2VcIik7XG5cbi8vIFNlIGFncmVnYSBjYXJkcyBpbmljaWFsZXNcbmNvbnN0IGNhcmRzID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoZWxlbWVudCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGVsZW1lbnQsIFwicGxhY2UtZ3JpZF9fZWxlbWVudFwiLCB7XG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbihlbGVtZW50Lm5hbWUsIGVsZW1lbnQubGluayk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNhcmRzLmFkZEl0ZW0obmV3Q2FyZC5jcmVhdGVDYXJkKCkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLnBsYWNlLWdyaWRcIlxuKTtcbmNhcmRzLnJlbmRlcmVyKCk7XG5cbi8vIE9idGllbmUgZGF0b3MgZGUgcGVyZmlsXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9faW5mby1uYW1lXCIsXG4gIGFib3V0U2VsZWN0b3I6IFwiLnByb2ZpbGVfX2luZm8tb2NjdXBhdGlvblwiLFxufSk7XG5cbi8vIFBvcHVwIEVkaXRhclxuY29uc3QgcG9wdXBFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXCJwb3B1cEVkaXRcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIHVzZXJOYW1lLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXMuaW5wdXROYW1lO1xuICBhYm91dE1lLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXMuaW5wdXRBYm91dDtcbiAgcG9wdXBFZGl0LmNsb3NlKCk7XG59KTtcblxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEVkaXQub3BlbigpO1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4gIGlucHV0QWJvdXQudmFsdWUgPSB1c2VyRGF0YS5hYm91dDtcbiAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuLy9Qb3B1cCBBZ3JlZ2FyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwicG9wdXBBZGRcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmREYXRhID0ge1xuICAgIG5hbWU6IGlucHV0VmFsdWVzLmlucHV0VGl0bGUsXG4gICAgbGluazogaW5wdXRWYWx1ZXMuaW5wdXRMaW5rLFxuICAgIGRlc2NyaXB0aW9uOiBpbnB1dFZhbHVlcy5pbnB1dFRpdGxlLFxuICB9O1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQobmV3Q2FyZERhdGEsIFwicGxhY2UtZ3JpZF9fZWxlbWVudFwiLCB7XG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICBwb3B1cEltYWdlLm9wZW4obmV3Q2FyZERhdGEubmFtZSwgbmV3Q2FyZERhdGEubGluayk7XG4gICAgfSxcbiAgfSk7XG4gIHBsYWNlR3JpZC5wcmVwZW5kKG5ld0NhcmQuY3JlYXRlQ2FyZCgpKTtcbn0pO1xuXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBZGQub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbmZpZ0Zvcm0iLCJlbGVtZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImtleSIsInZhbHVlIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uY2F0IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsImVycm9yQ2xhc3MiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX3RoaXMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RoaXMyIiwiZG9jdW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImZpZWxkc2V0U2VsZWN0b3IiLCJmaWVsZHNldCIsIl9zZXRFdmVudExpc3RlbmVycyIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJpbnB1dE5hbWUiLCJpbnB1dEFib3V0IiwidXNlck5hbWUiLCJhYm91dE1lIiwicGxhY2VHcmlkIiwiQ2FyZCIsImNhcmQiLCJzZWxlY3RvciIsIl9yZWYiLCJoYW5kbGVDYXJkQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfZGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsIl9zZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkZWxldGVCdXR0b24iLCJfZWxlbWVudCIsImxpa2VCdXR0b24iLCJ0YXJnZXQiLCJjbG9zZXN0IiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwic3JjIiwiYWx0IiwiX2FkZEV2ZW50TGlzdGVuZXJzVG9DYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiY29udGFpbmVyIiwiaXRlbSIsImFwcGVuZCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsIl9hYm91dCIsImFib3V0IiwiX3JlZjIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiY2xvc2UiLCJldmVudCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsImNhbGxCYWNrIiwiX2NhbGxTdXBlciIsIl9zdWJtaXRDYWxsYmFjayIsIl9pbmhlcml0cyIsImlucHV0VmFsdWVzIiwiZm9ybSIsImlucHV0IiwiX3N1cGVyUHJvcEdldCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwiZm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cEltYWdlIiwiY2FyZHMiLCJuZXdDYXJkIiwib3BlbiIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwidXNlckluZm8iLCJwb3B1cEVkaXQiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwicG9wdXBBZGQiLCJuZXdDYXJkRGF0YSIsImlucHV0VGl0bGUiLCJpbnB1dExpbmsiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==